## Home feed.py

from django.core.management.base import BaseCommand
from django.contrib.auth.models import User
from api.models import Post, Comment, Notification

class Command(BaseCommand):
    help = 'Display social media home feed'

    def handle(self, *args, **kwargs):
        user = User.objects.first()  # or get logged-in user dynamically
        print("SOCIAL MEDIA PLATFORM - HOME PAGE")
        print("="*35)
        print(f"\nğŸ‘¤ Welcome back, {user.username}!")
        print("ğŸ“¢ What's on your mind?")
        print("[Share your thoughts...]")
        print("[Upload Image] [Post]\n")

        print("ğŸ“° FEED:\n")
        posts = Post.objects.all().order_by('-created_at')[:5]
        for post in posts:
            print(f"ğŸ’¼ {post.author.username} - {post.created_at.strftime('%H:%M %p')}")
            print(post.content)
            print(f"ğŸ‘ {post.likes.count()} Likes | ğŸ’¬ {post.comments.count()} Comments | ğŸ”„ Share\n")
            print("ğŸ’¬ Comments:")
            for comment in post.comments.all():
                print(f"- {comment.author.username}: {comment.content}")
            print()

        # Similar logic for notifications, who to follow, stats
        print("ğŸ‘¥ WHO TO FOLLOW: ...")
        print("ğŸ”” NOTIFICATIONS: ...")
        print("ğŸ“Š STATS: ...")
